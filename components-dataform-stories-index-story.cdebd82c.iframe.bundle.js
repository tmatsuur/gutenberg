"use strict";(globalThis.webpackChunkgutenberg=globalThis.webpackChunkgutenberg||[]).push([[8567],{"./packages/components/build-module/text-control/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_base_control__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/base-control/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TextControl=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.forwardRef)((function UnforwardedTextControl(props,ref){const{__nextHasNoMarginBottom,__next40pxDefaultSize=!1,label,hideLabelFromVision,value,help,id:idProp,className,onChange,type="text",...additionalProps}=props,id=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__.Z)(TextControl,"inspector-text-control",idProp);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_base_control__WEBPACK_IMPORTED_MODULE_2__.ZP,{__nextHasNoMarginBottom,label,hideLabelFromVision,id,help,className,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_3__.Z)("components-text-control__input",{"is-next-40px-default-size":__next40pxDefaultSize}),type,id,value,onChange:event=>onChange(event.target.value),"aria-describedby":help?id+"__help":void 0,ref,...additionalProps})})})),__WEBPACK_DEFAULT_EXPORT__=TextControl},"./packages/compose/build-module/hooks/use-merge-refs/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useMergeRefs});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function assignRef(ref,value){"function"==typeof ref?ref(value):ref&&ref.hasOwnProperty("current")&&(ref.current=value)}function useMergeRefs(refs){const element=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(),isAttached=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),didElementChange=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),previousRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),currentRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(refs);return currentRefs.current=refs,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{!1===didElementChange.current&&!0===isAttached.current&&refs.forEach(((ref,index)=>{const previousRef=previousRefs.current[index];ref!==previousRef&&(assignRef(previousRef,null),assignRef(ref,element.current))})),previousRefs.current=refs}),refs),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{didElementChange.current=!1})),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value=>{assignRef(element,value),didElementChange.current=!0,isAttached.current=null!==value;const refsToAssign=value?currentRefs.current:previousRefs.current;for(const ref of refsToAssign)assignRef(ref,value)}),[])}},"./packages/dataviews/src/normalize-fields.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function normalizeFields(fields){return fields.map((field=>{const getValue=field.getValue||(({item})=>item[field.id]);return{...field,label:field.label||field.id,getValue,render:field.render||getValue}}))}__webpack_require__.d(__webpack_exports__,{U:()=>normalizeFields})},"./packages/dataviews/src/components/dataform/stories/index.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>index_story});var react=__webpack_require__("./node_modules/react/index.js"),text_control=__webpack_require__("./packages/components/build-module/text-control/index.js"),select_control=__webpack_require__("./packages/components/build-module/select-control/index.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),normalize_fields=__webpack_require__("./packages/dataviews/src/normalize-fields.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function DataFormTextControl({data,field,onChange}){const{id,label,placeholder}=field,value=field.getValue({item:data}),onChangeControl=(0,react.useCallback)((newValue=>onChange((prevItem=>({...prevItem,[id]:newValue})))),[id,onChange]);return(0,jsx_runtime.jsx)(text_control.Z,{label,placeholder,value:null!=value?value:"",onChange:onChangeControl,__next40pxDefaultSize:!0})}function DataFormNumberControl({data,field,onChange}){var _field$getValue;const{id,label,description}=field,value=null!==(_field$getValue=field.getValue({item:data}))&&void 0!==_field$getValue?_field$getValue:"",onChangeControl=(0,react.useCallback)((newValue=>onChange((prevItem=>({...prevItem,[id]:newValue})))),[id,onChange]);if(field.elements){const elements=[{label:(0,build_module.__)("Select item"),value:""},...field.elements];return(0,jsx_runtime.jsx)(select_control.Z,{label,value,options:elements,onChange:onChangeControl})}return(0,jsx_runtime.jsx)(number_control.Z,{label,help:description,value,onChange:onChangeControl,__next40pxDefaultSize:!0})}DataFormTextControl.displayName="DataFormTextControl",DataFormNumberControl.displayName="DataFormNumberControl";const controls={text:DataFormTextControl,integer:DataFormNumberControl};function DataForm({data,fields,form,onChange}){return(0,react.useMemo)((()=>(0,normalize_fields.U)(fields.filter((({id})=>!!form.visibleFields?.includes(id))))),[fields,form.visibleFields]).map((field=>{const DataFormControl=function getControlForField(field){return field.type&&Object.keys(controls).includes(field.type)?controls[field.type]:null}(field);return DataFormControl?(0,jsx_runtime.jsx)(DataFormControl,{data,field,onChange},field.id):null}))}try{dataform.displayName="dataform",dataform.__docgenInfo={description:"",displayName:"dataform",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Item"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Field<Item>[]"}},form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"Form"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"Dispatch<SetStateAction<Item>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/dataviews/src/components/dataform/index.tsx#dataform"]={docgenInfo:dataform.__docgenInfo,name:"dataform",path:"packages/dataviews/src/components/dataform/index.tsx#dataform"})}catch(__react_docgen_typescript_loader_error){}const index_story={title:"DataViews/DataForm",component:DataForm,parameters:{sourceLink:"packages/dataviews/src/components/dataform",badges:[]}},fields=[{id:"title",label:"Title",type:"text"},{id:"order",label:"Order",type:"integer"},{id:"author",label:"Author",type:"integer",elements:[{value:1,label:"Jane"},{value:2,label:"John"}]}],Default=()=>{const[post,setPost]=(0,react.useState)({title:"Hello, World!",order:2,author:1});return(0,jsx_runtime.jsx)(DataForm,{data:post,fields,form:{visibleFields:["title","order","author"]},onChange:setPost})};Default.displayName="Default",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => {\n  const [post, setPost] = useState({\n    title: 'Hello, World!',\n    order: 2,\n    author: 1\n  });\n  const form = {\n    visibleFields: ['title', 'order', 'author']\n  };\n  return <DataForm data={post} fields={fields} form={form} onChange={setPost} />;\n}",...Default.parameters?.docs?.source}}}}}]);